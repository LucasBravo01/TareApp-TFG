<!DOCTYPE html>
<html lang="es">

<head>
    <%- include("../public/utils/head.html") %>
    <!-- Importar CSS específicos -->
    <link rel="stylesheet" href="/css/<%= session.currentUser.configuration.theme %>/style.css">
    <!-- Importar JS específicos -->
    <script src="/js/notifications.js"></script>
</head>

<body data-response="<%= JSON.stringify(response) %>">
    <!-- Importar modal error -->
    <%- include("../public/utils/modal.html") %>
    <!-- Importar nav -->
    <%- include("fragments/nav", { generalInfo: generalInfo }) %>
    
    <div class="container">
        <div class="d-flex justify-content-center">
            <h1 class="title">NOTIFICACIONES</h1>
        </div>

        <div class="justify-content-center">
            <% let primeraHoy = false;
            let primeraAnterior = false; 
            let currentDate = new Date(); %>
            <% if(reminders.length == 0) {%>
                <div class="col-12 text-center mt-3">
                    <p>No hay notificaciones</p>
                </div>
            <% }else{ %>
                <% reminders.forEach( r=> { %>
                    <% if(!primeraHoy && r.sent_date.getDate() === currentDate.getDate()) { %>
                        <!--SECCIÓN HOY-->
                        <div class="col-12 text-center mt-3">
                            <p class="text-start subtitle">Hoy</p>
                            <hr class="separator-line" />
                        </div>
                    <% primeraHoy = true; } %>
    
                    <% if(!primeraAnterior && r.sent_date.getDate() !== currentDate.getDate()) { %>
                        <!--SECCIÓN ANTERIORES-->
                        <div class="col-12 text-center mt-3">
                            <p class="text-start subtitle">Anteriores</p>
                            <hr class="separator-line" />
                        </div>
                    <% primeraAnterior = true; } %>
    
                    <div class="card-notification">
                        <div class="d-grid align-items-center" style="grid-template-columns: 25% 75%;">
                            <div class="d-flex justify-content-center">
                                <img src="/images/logos/logo-no-background-no-text.png" height="50px">
                            </div>
                            <div>
                                <span><%= r.message %></span>
                                <a href="/tareas/tarea/<%= r.idActivity %>">
                                <p class="link-task text-center">Ir a la tarea</p>
                                </a>
                            </div>
                        </div>
                    </div>
                <% }); %>
            <% } %>
        </div>
    </div>
    <!-- text to voice button -->
</body>

</html>